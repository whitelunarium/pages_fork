<style>
/* Import cute fonts to match main project */
@import url('https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,300;0,400;0,600;0,700;0,800;1,400&family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,400&display=swap');

/* Cute font applications to match main project */
.cute-title {
  font-family: 'Comic Neue', cursive;
  font-weight: 700;
}

.cute-text {
  font-family: 'Nunito', sans-serif;
  font-weight: 400;
}

.cute-heading {
  font-family: 'Nunito', sans-serif;
  font-weight: 700;
}

.cute-subheading {
  font-family: 'Nunito', sans-serif;
  font-weight: 600;
}

/* City cards - clean sections with extended height */
.city-card {
  background: linear-gradient(135deg, 
    rgba(55, 65, 81, 0.95) 0%, 
    rgba(75, 85, 99, 0.95) 50%, 
    rgba(55, 65, 81, 0.95) 100%);
  border: 2px solid rgba(139, 92, 246, 0.3);
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  padding: 24px 24px 80px 24px;  /* Added extra bottom padding for button space */
  margin: 32px 0;
  overflow: visible;
  transition: all 0.3s ease;
  position: relative;
  min-height: 220px;  /* Minimum height to ensure space */
}

/* LOCKED CITIES */
.city-card.locked {
  background: linear-gradient(135deg, 
    rgba(55, 65, 81, 0.4) 0%, 
    rgba(75, 85, 99, 0.4) 50%, 
    rgba(55, 65, 81, 0.4) 100%);
  border: 2px solid rgba(107, 114, 128, 0.3);
  opacity: 0.6;
  filter: grayscale(80%);
}

.city-card.locked h3 {
  color: #9ca3af !important;
}

.city-card.locked p, .city-card.locked div {
  color: #6b7280 !important;
}

.city-card.locked::after {
  content: 'üîí Complete previous city to unlock';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(31, 41, 55, 0.95);
  color: #9ca3af;
  padding: 12px 24px;
  border-radius: 25px;
  font-weight: 600;
  font-size: 14px;
  border: 1px solid rgba(107, 114, 128, 0.5);
  z-index: 10;
}

.city-card.unlocked {
  animation: unlockPulse 1s ease-out;
}

@keyframes unlockPulse {
  0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.7); }
  50% { transform: scale(1.02); box-shadow: 0 0 0 20px rgba(139, 92, 246, 0); }
  100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(139, 92, 246, 0); }
}

/* Progress indicators on city cards */
.city-progress {
  position: absolute;
  top: 20px;
  right: 20px;
  background: rgba(139, 92, 246, 0.2);
  border: 1px solid rgba(139, 92, 246, 0.5);
  border-radius: 20px;
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 600;
  color: #c084fc;
}

.city-progress.completed {
  background: rgba(16, 185, 129, 0.2);
  border: 1px solid rgba(16, 185, 129, 0.5);
  color: #10b981;
}

/* City icon styling - supports both images and emojis */
.city-icon {
  display: inline-block;
  margin-right: 12px;
  vertical-align: middle;
}

.city-icon img {
  width: 48px;
  height: 48px;
  border-radius: 8px;
  object-fit: cover;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
  cursor: pointer;
}

.city-icon img:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 16px rgba(139, 92, 246, 0.4);
}

.city-icon.emoji {
  font-size: 48px;
  line-height: 1;
}

/* IMAGE MODAL/LIGHTBOX STYLES */
.image-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(10px);
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.image-modal.show {
  opacity: 1;
  visibility: visible;
}

.image-modal-content {
  position: relative;
  max-width: 90vw;
  max-height: 90vh;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  transform: scale(0.7);
  transition: transform 0.3s ease;
}

.image-modal.show .image-modal-content {
  transform: scale(1);
}

.image-modal img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 12px;
  max-width: 80vw;
  max-height: 80vh;
}

.image-modal-close {
  position: absolute;
  top: -10px;
  right: -10px;
  background: rgba(220, 38, 38, 0.9);
  color: white;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

.image-modal-close:hover {
  background: rgba(185, 28, 28, 1);
  transform: scale(1.1);
}

.image-modal-title {
  position: absolute;
  bottom: -50px;
  left: 50%;
  transform: translateX(-50%);
  color: white;
  font-family: 'Nunito', sans-serif;
  font-weight: 600;
  font-size: 18px;
  text-align: center;
  background: rgba(0, 0, 0, 0.5);
  padding: 8px 16px;
  border-radius: 20px;
  backdrop-filter: blur(10px);
}

@media (max-width: 768px) {
  .city-card {
    padding: 16px 16px 70px 16px;  /* Adjusted bottom padding for mobile */
    margin: 20px 0;
    min-height: 200px;  /* Slightly smaller minimum height on mobile */
  }
  
  .city-icon img {
    width: 36px;
    height: 36px;
  }
  
  .city-icon.emoji {
    font-size: 36px;
  }
  
  .image-modal-content {
    padding: 10px;
  }
  
  .image-modal img {
    max-width: 95vw;
    max-height: 85vh;
  }
  
  .image-modal-title {
    font-size: 14px;
    bottom: -40px;
  }
}

/* ENHANCED: Route button back inside city card */
.city-route-button {
  position: absolute;
  bottom: 20px;  /* Back inside the card */
  right: 20px;
  font-size: 32px;
  background: rgba(31, 41, 55, 0.95);
  padding: 16px;
  border-radius: 50%;
  border: 2px solid rgba(139, 92, 246, 0.5);
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 10;
  text-decoration: none;
  display: inline-block;
  color: white;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

.city-route-button:hover {
  background: rgba(139, 92, 246, 0.2);
  border-color: rgba(139, 92, 246, 0.8);
  transform: scale(1.1);
  box-shadow: 0 8px 32px rgba(139, 92, 246, 0.4);
  color: white;
  text-decoration: none;
}

.city-route-button.locked {
  background: rgba(107, 114, 128, 0.3);
  border-color: rgba(107, 114, 128, 0.5);
  cursor: not-allowed;
  opacity: 0.5;
  pointer-events: none;
}

.city-route-button.locked:hover {
  transform: none;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

/* Special styling for San Diego start button */
.city-route-button.start-journey {
  background: linear-gradient(135deg, #10b981, #059669);
  border-color: rgba(16, 185, 129, 0.8);
  box-shadow: 0 0 24px rgba(16, 185, 129, 0.4);
  animation: startPulse 2s infinite;
}

.city-route-button.start-journey:hover {
  background: linear-gradient(135deg, #047857, #065f46);
  transform: scale(1.15);
  box-shadow: 0 8px 40px rgba(16, 185, 129, 0.6);
  color: white;
}

@keyframes startPulse {
  0%, 100% { box-shadow: 0 0 24px rgba(16, 185, 129, 0.4); }
  50% { box-shadow: 0 0 36px rgba(16, 185, 129, 0.8); }
}

/* XP and Theme indicators */
.city-xp {
  position: absolute;
  bottom: 20px;
  left: 20px;
  background: rgba(255, 215, 0, 0.2);
  border: 1px solid rgba(255, 215, 0, 0.5);
  border-radius: 20px;
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 600;
  color: #ffd700;
}

.city-theme {
  display: inline-block;
  margin-top: 8px;
  font-size: 12px;
  color: #a78bfa;
  font-style: italic;
}

/* Data tag styling to match theme */
.data-tag {
  background: linear-gradient(135deg, #8b5cf6, #3b82f6);
  border: 2px solid rgba(139, 92, 246, 0.4);
  color: white;
  font-family: 'Nunito', sans-serif;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
  transition: all 0.3s ease;
}

.data-tag:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(139, 92, 246, 0.6);
  border: 2px solid rgba(139, 92, 246, 0.8);
}

/* Prerequisite button styling */
.prereq-button {
  background: linear-gradient(135deg, #8b5cf6, #3b82f6);
  border: 2px solid rgba(139, 92, 246, 0.4);
  padding: 12px 24px;
  border-radius: 25px;
  color: white;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-size: 12px;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
  position: relative;
  overflow: hidden;
  font-family: 'Nunito', sans-serif;
  text-decoration: none;
  display: inline-block;
}

.prereq-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(139, 92, 246, 0.6);
  border: 2px solid rgba(139, 92, 246, 0.8);
  color: white;
  text-decoration: none;
}

.prereq-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s ease;
}

.prereq-button:hover::before {
  left: 100%;
}

/* UNLOCK NOTIFICATION */
.unlock-notification {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(135deg, #10b981, #059669);
  color: white;
  padding: 16px 32px;
  border-radius: 25px;
  font-weight: 600;
  font-size: 16px;
  z-index: 1000;
  box-shadow: 0 8px 32px rgba(16, 185, 129, 0.4);
  animation: slideInDown 0.5s ease-out;
}

@keyframes slideInDown {
  from { transform: translateX(-50%) translateY(-100px); opacity: 0; }
  to { transform: translateX(-50%) translateY(0); opacity: 1; }
}
</style>

<div class="min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-blue-900">
  <div class="container mx-auto px-8 py-16">

    {% if page.lxdData.Prequisites %}
    <div class="mb-16 text-center">
      <h3 class="text-2xl font-bold text-white mb-8 cute-heading">üéØ Prerequisites</h3>
      <ul class="flex flex-wrap gap-8 justify-center">
        {% for prereq in page.lxdData.Prequisites %}
          <li>
            <a href="{{ site.baseurl}}{{ prereq.link }}" class="prereq-button cute-text">
              {{ prereq.title }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    <div class="relative z-10">
      
      <!-- Node Title & Description -->
      <div class="text-center mb-20">
        <div class="inline-block relative mb-10">
          <h2 class="text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 cute-title">
            {{ page.lxdData.Title }}
          </h2>
          <div class="absolute -inset-2 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 opacity-20 blur-xl rounded-lg"></div>
        </div>
        {% if page.lxdData.Description %}
        <p class="text-xl text-gray-300 max-w-4xl mx-auto leading-relaxed cute-text px-6">
          {{ page.lxdData.Description }}
        </p>
        {% endif %}
      </div>

      <!-- Progress Overview -->
      <div class="text-center mb-8">
        <div class="inline-flex items-center gap-4 bg-rgba(31, 41, 55, 0.8) rounded-2xl px-6 py-3 border border-purple-500/30">
          <span class="text-white cute-text">Journey Progress:</span>
          <span class="text-green-400 font-bold" id="overall-progress">City 1/4</span>
          <span class="text-purple-400" id="total-activities">Progress tracked across submodules</span>
        </div>
      </div>

      <!-- Travel Route with Cities and Buttons -->
      <div class="max-w-5xl mx-auto">
        {% if page.lxdData.Cities %}
          {% for city in page.lxdData.Cities %}
            
            <!-- City Card with integrated button -->
            <div class="city-card rounded-2xl shadow-lg relative" id="city-{{ forloop.index0 }}" data-city-index="{{ forloop.index0 }}">
              
              <!-- Progress indicator -->
              <div class="city-progress" id="progress-{{ forloop.index0 }}">
                üéØ Ready to explore
              </div>
              
              <!-- XP Reward indicator -->
              {% if city.XP_Reward %}
              <div class="city-xp">
                ‚≠ê {{ city.XP_Reward }} XP
              </div>
              {% endif %}
              
              <!-- City Title with Icon/Image support -->
              <div class="w-full mb-4">
                <h3 class="text-3xl xl:text-4xl font-bold text-white cute-heading flex items-center">
                  <!-- Icon/Image Display Logic -->
                  {% if city.Image %}
                    <span class="city-icon">
                      <img src="{{ site.baseurl }}{{ city.Image }}" 
                           alt="{{ city.Name }} icon" 
                           loading="lazy"
                           onclick="openImageModal('{{ site.baseurl }}{{ city.Image }}', '{{ city.Name }}')"
                           title="Click to view full image">
                    </span>
                  {% elsif city.Icon %}
                    <span class="city-icon emoji">{{ city.Icon }}</span>
                  {% endif %}
                  {{ city.Name }}
                </h3>
                {% if city.Theme %}
                <div class="city-theme cute-text">{{ city.Theme }}</div>
                {% endif %}
              </div>

              <!-- City Description -->
              <div class="w-full mb-6">
                {% if city.Description %}
                <p class="text-gray-300 text-lg leading-relaxed cute-text mb-4">{{ city.Description }}</p>
                {% endif %}
                {% if city.Challenge %}
                <div class="text-sm text-purple-400 cute-text mb-2">
                  üéØ <strong>Challenge:</strong> {{ city.Challenge }}
                </div>
                {% endif %}
                {% if city.Analogy %}
                <div class="text-sm text-blue-400 cute-text">
                  üí° <strong>Analogy:</strong> {{ city.Analogy }}
                </div>
                {% endif %}
              </div>

              <!-- Route Button inside card -->
              {% if forloop.index0 == 0 %}
                {% assign city_permalink = "/west-coast/food/SD" %}
              {% elsif forloop.index0 == 1 %}
                {% assign city_permalink = "/west-coast/food/LA" %}
              {% elsif forloop.index0 == 2 %}
                {% assign city_permalink = "/west-coast/food/SF" %}
              {% else %}
                {% assign city_permalink = "/west-coast/food/SEA" %}
              {% endif %}
              <a href="{{ site.baseurl }}{{ city_permalink }}" 
                 class="city-route-button {% if forloop.first %}start-journey{% endif %}" 
                 id="route-link-{{ forloop.index0 }}" 
                 data-route="{{ forloop.index0 }}" 
                 title="{% if forloop.first %}‚òÄÔ∏è Start Your San Diego Journey!{% elsif forloop.index0 == 1 %}üå¥ Explore Los Angeles{% elsif forloop.index0 == 2 %}üåÅ Discover San Francisco{% else %}üå≤ Reach Seattle{% endif %}">
                {% if forloop.first %}‚òÄÔ∏è{% elsif forloop.index0 == 1 %}üå¥{% elsif forloop.index0 == 2 %}üåÅ{% else %}üå≤{% endif %}
              </a>
              
            </div>

          {% endfor %}
        {% else %}
          <div class="text-center text-red-400">
            <p>No cities data found. Check your markdown file structure.</p>
          </div>
        {% endif %}
      </div>

      <!-- Instructions for Navigation -->
      <div class="text-center mt-12 mb-8">
        <div class="inline-block bg-rgba(31, 41, 55, 0.8) rounded-2xl px-8 py-4 border border-blue-500/30">
          <h3 class="text-lg font-bold text-white cute-heading mb-2">üó∫Ô∏è How to Navigate</h3>
          <p class="text-gray-300 cute-text text-sm">
            Click on city images to view them full-screen, or click the emoji buttons in the bottom-right corner to enter that city's submodule.<br>
            Complete activities in order: San Diego ‚Üí Los Angeles ‚Üí San Francisco ‚Üí Seattle
          </p>
        </div>
      </div>

      <!-- Back to Hub Button -->
      <div class="text-center mt-20">
        <a href="{{ site.baseurl }}/west-coast" class="prereq-button cute-text inline-block">
          üè† Back to Main
        </a>
      </div>

    </div>
  </div>
</div>

<!-- IMAGE MODAL -->
<div id="imageModal" class="image-modal" onclick="closeImageModal()">
  <div class="image-modal-content" onclick="event.stopPropagation()">
    <button class="image-modal-close" onclick="closeImageModal()">√ó</button>
    <img id="modalImage" src="" alt="City Image">
    <div id="modalTitle" class="image-modal-title"></div>
  </div>
</div>

<script type="text/javascript">
// IMAGE MODAL FUNCTIONS
function openImageModal(imageSrc, cityName) {
  const modal = document.getElementById('imageModal');
  const modalImage = document.getElementById('modalImage');
  const modalTitle = document.getElementById('modalTitle');
  
  modalImage.src = imageSrc;
  modalTitle.textContent = cityName;
  modal.classList.add('show');
  
  // Prevent body scrolling when modal is open
  document.body.style.overflow = 'hidden';
}

function closeImageModal() {
  const modal = document.getElementById('imageModal');
  modal.classList.remove('show');
  
  // Restore body scrolling
  document.body.style.overflow = 'auto';
}

// Close modal with Escape key
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeImageModal();
  }
});

// CITY UNLOCKING SYSTEM (simplified for navigation)
let gameProgress = {
  unlockedCities: [0], // San Diego starts unlocked
  completedCities: [],
  totalCitiesCompleted: 0
};

// Load progress from localStorage
function loadGameProgress() {
  const saved = localStorage.getItem('mchopiee_city_progress');
  if (saved) {
    try {
      gameProgress = JSON.parse(saved);
    } catch (e) {
      console.error('Error loading game progress:', e);
      // Reset to defaults if corrupted
      gameProgress = {
        unlockedCities: [0],
        completedCities: [],
        totalCitiesCompleted: 0
      };
    }
  }
}

// Save progress to localStorage
function saveGameProgress() {
  try {
    localStorage.setItem('mchopiee_city_progress', JSON.stringify(gameProgress));
  } catch (e) {
    console.error('Error saving game progress:', e);
  }
}

// Initialize city locking on page load
function initializeCityLocking() {
  loadGameProgress();
  
  // Get all city cards and route buttons
  const cityCards = document.querySelectorAll('.city-card');
  const routeButtons = document.querySelectorAll('.city-route-button');
  
  // Lock all cities except unlocked ones
  cityCards.forEach((card, index) => {
    if (!gameProgress.unlockedCities.includes(index)) {
      lockCity(index);
    } else {
      unlockCity(index);
    }
  });
  
  // Lock route buttons for locked cities
  routeButtons.forEach((button, index) => {
    if (!gameProgress.unlockedCities.includes(index)) {
      lockCityButton(index);
    } else {
      unlockCityButton(index);
    }
  });
  
  updateProgressDisplay();
}

function lockCity(cityIndex) {
  const cityCard = document.getElementById(`city-${cityIndex}`);
  if (cityCard) {
    cityCard.classList.add('locked');
    cityCard.style.position = 'relative';
  }
}

function unlockCity(cityIndex) {
  const cityCard = document.getElementById(`city-${cityIndex}`);
  if (cityCard) {
    cityCard.classList.remove('locked');
    cityCard.classList.add('unlocked');
    
    // Show unlock notification if this is a new unlock
    if (cityIndex > 0) {
      showUnlockNotification(cityIndex);
    }
  }
}

function lockCityButton(routeIndex) {
  const routeButton = document.getElementById(`route-link-${routeIndex}`);
  
  if (routeButton) {
    routeButton.classList.add('locked');
    routeButton.title = 'Complete previous city to unlock';
    // Remove start-journey class if locked
    routeButton.classList.remove('start-journey');
    
    // Add click prevention
    routeButton.addEventListener('click', function(e) {
      e.preventDefault();
      alert('üîí Complete the previous city first to unlock this route!');
    });
  }
}

function unlockCityButton(routeIndex) {
  const routeButton = document.getElementById(`route-link-${routeIndex}`);
  
  if (routeButton) {
    routeButton.classList.remove('locked');
    
    // Remove any click prevention
    routeButton.style.pointerEvents = 'auto';
    
    // Set appropriate title based on city
    const cityData = [
      { title: '‚òÄÔ∏è Start Your San Diego Journey!' },
      { title: 'üå¥ Explore Los Angeles' },
      { title: 'üåÅ Discover San Francisco' },
      { title: 'üå≤ Reach Seattle' }
    ];
    
    const cityInfo = cityData[routeIndex] || { title: 'Click to explore this city' };
    routeButton.title = cityInfo.title;
    
    if (routeIndex === 0) {
      routeButton.classList.add('start-journey');
    }
  }
}

function showUnlockNotification(cityIndex) {
  const cityNames = ['San Diego', 'Los Angeles', 'San Francisco', 'Seattle'];
  const cityName = cityNames[cityIndex] || `City ${cityIndex + 1}`;
  
  const notification = document.createElement('div');
  notification.className = 'unlock-notification';
  notification.innerHTML = `üéâ ${cityName} Unlocked! Continue your journey!`;
  
  document.body.appendChild(notification);
  
  // Remove notification after 4 seconds
  setTimeout(() => {
    if (document.body.contains(notification)) {
      notification.style.animation = 'slideInDown 0.5s ease-out reverse';
      setTimeout(() => {
        document.body.removeChild(notification);
      }, 500);
    }
  }, 4000);
}

function updateProgressDisplay() {
  // Update overall progress
  const overallProgress = document.getElementById('overall-progress');
  const totalActivitiesElement = document.getElementById('total-activities');
  
  if (overallProgress) {
    overallProgress.textContent = `City ${gameProgress.unlockedCities.length}/4`;
  }
  
  if (totalActivitiesElement) {
    if (gameProgress.completedCities.length > 0) {
      totalActivitiesElement.textContent = `${gameProgress.completedCities.length} cities completed`;
    } else {
      totalActivitiesElement.textContent = 'Progress tracked across submodules';
    }
  }
  
  // Update city progress indicators
  gameProgress.completedCities.forEach(cityIndex => {
    const progressElement = document.getElementById(`progress-${cityIndex}`);
    if (progressElement) {
      progressElement.classList.add('completed');
      progressElement.textContent = '‚úÖ Complete';
    }
  });
}

// Function to mark a city as completed (can be called from submodules)
function markCityCompleted(cityIndex) {
  if (!gameProgress.completedCities.includes(cityIndex)) {
    gameProgress.completedCities.push(cityIndex);
    gameProgress.totalCitiesCompleted++;
    
    // Unlock next city
    const nextCityIndex = cityIndex + 1;
    if (nextCityIndex < 4 && !gameProgress.unlockedCities.includes(nextCityIndex)) {
      gameProgress.unlockedCities.push(nextCityIndex);
      unlockCity(nextCityIndex);
      unlockCityButton(nextCityIndex);
    }
    
    saveGameProgress();
    updateProgressDisplay();
  }
}

// Expose function globally so submodules can call it
window.markCityCompleted = markCityCompleted;

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
  console.log('=== FOOD MODULE NAVIGATION SETUP ===');
  initializeCityLocking();
});
</script>